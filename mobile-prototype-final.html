<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estimate Mobile - Final Prototype</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: #121212;
            color: #FFFFFF;
            overflow: hidden;
            user-select: none;
        }

        .mobile-only {
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-only { display: block; }
            .desktop-only { display: none; }
        }

        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .header {
            background: #1E1E1E;
            border-bottom: 1px solid #333;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .nav-btn {
            background: #2A2A2A;
            border: 2px solid #444;
            color: #FFFFFF;
            font-size: 18px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            transition: all 0.2s;
        }

        .nav-btn:active {
            background: #BB86FC;
            color: #000;
            transform: scale(0.95);
        }

        .nav-btn:disabled {
            background: #1A1A1A;
            border-color: #2A2A2A;
            color: #666;
            cursor: not-allowed;
        }

        .header-title {
            font-size: 18px;
            font-weight: 500;
            color: #FFFFFF;
            text-align: center;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            display: none;
            margin-bottom: 80px;
        }

        .content.active {
            display: block;
        }

        .screen {
            padding: 20px 16px;
            min-height: 100%;
        }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 80px;
            background: rgba(30, 30, 30, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid #333;
            display: flex;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .nav-item.active {
            color: #BB86FC;
        }

        .nav-item:active {
            background: rgba(187, 134, 252, 0.1);
        }

        .nav-icon {
            width: 28px;
            height: 28px;
            background: currentColor;
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
            margin-bottom: 4px;
        }

        .nav-indicator {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background: #BB86FC;
            border-radius: 0 0 3px 3px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .nav-item.active .nav-indicator {
            opacity: 1;
        }

        /* –ò–∫–æ–Ω–∫–∏ */
        .icon-projects { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 2h2v4l-1-.75L11 9V5z'/%3E%3C/svg%3E"); }
        .icon-estimates { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z'/%3E%3C/svg%3E"); }
        .icon-finance { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z'/%3E%3C/svg%3E"); }
        .icon-profile { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E"); }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ */
        .project-grid {
            display: grid;
            gap: 16px;
            grid-template-columns: 1fr;
        }

        .project-card {
            background: #1E1E1E;
            border: 1px solid #333;
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .project-card:active {
            transform: scale(0.98);
            background: rgba(187, 134, 252, 0.05);
        }

        .project-icon {
            font-size: 48px;
            margin-bottom: 12px;
            display: block;
        }

        .project-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .project-subtitle {
            font-size: 14px;
            color: #B0B0B0;
            margin-bottom: 12px;
        }

        .project-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #03DAC6;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ */
        .project-header {
            background: linear-gradient(135deg, #BB86FC 0%, #03DAC6 100%);
            color: #000;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .project-name {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .project-address {
            font-size: 14px;
            opacity: 0.8;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: #1E1E1E;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            border: 1px solid #333;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 500;
            color: #03DAC6;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: #B0B0B0;
        }

        .estimates-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-shrink: 0;
        }

        .section-title {
            font-size: 18px;
            font-weight: 500;
            color: #BB86FC;
        }

        .estimates-list {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 16px;
            min-height: 0;
        }

        .estimate-card {
            background: #1E1E1E;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .estimate-card:active {
            transform: scale(0.98);
            background: #2A2A2A;
        }

        .estimate-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .estimate-name {
            font-weight: 500;
            font-size: 14px;
        }

        .estimate-status {
            background: #03DAC6;
            color: #000;
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
        }

        .estimate-status.draft {
            background: #FF9500;
        }

        .estimate-status.in_progress {
            background: #03DAC6;
        }

        .estimate-status.approved {
            background: #4CAF50;
        }

        .estimate-details {
            font-size: 12px;
            color: #B0B0B0;
            display: flex;
            justify-content: space-between;
        }

        .create-estimate-btn {
            background: linear-gradient(135deg, #BB86FC 0%, #03DAC6 100%);
            color: #000;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .create-estimate-btn:active {
            transform: scale(0.98);
        }

        /* –ü–æ–∏—Å–∫ */
        .search-bar {
            background: #1E1E1E;
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 16px;
            border: 1px solid #333;
        }

        .search-input {
            width: 100%;
            background: transparent;
            border: none;
            color: #FFFFFF;
            font-size: 16px;
            outline: none;
        }

        .search-input::placeholder {
            color: #666;
        }

        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .category-card {
            background: #1E1E1E;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .category-card:active {
            transform: scale(0.98);
            background: rgba(187, 134, 252, 0.05);
        }

        .category-icon {
            font-size: 32px;
            margin-bottom: 8px;
            display: block;
        }

        .category-name {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .category-count {
            font-size: 12px;
            color: #B0B0B0;
        }

        /* –†–∞–±–æ—Ç—ã */
        .works-list {
            display: grid;
            gap: 8px;
            padding-bottom: 16px;
        }

        .work-item {
            background: #1E1E1E;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .work-item:active {
            transform: scale(0.98);
        }

        .work-item.selected {
            border-color: #BB86FC;
            background: rgba(187, 134, 252, 0.05);
        }

        .work-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .work-name {
            font-weight: 500;
            font-size: 14px;
            flex: 1;
            margin-right: 8px;
        }

        .work-price {
            color: #03DAC6;
            font-weight: 500;
            font-size: 14px;
            white-space: nowrap;
        }

        .work-unit {
            font-size: 12px;
            color: #B0B0B0;
            margin-bottom: 8px;
        }

        .work-quantity {
            display: none;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #333;
        }

        .work-item.selected .work-quantity {
            display: block;
        }

        .quantity-input-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quantity-label {
            font-size: 12px;
            color: #B0B0B0;
            min-width: 80px;
        }

        .quantity-input {
            background: #2A2A2A;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 8px 12px;
            color: #FFFFFF;
            font-size: 14px;
            width: 100px;
            outline: none;
        }

        .quantity-input:focus {
            border-color: #BB86FC;
        }

        .works-actions {
            background: #1E1E1E;
            border-top: 1px solid #333;
            padding: 16px;
            position: sticky;
            bottom: 0;
            margin: 0 -16px -20px -16px;
        }

        .next-btn {
            background: linear-gradient(135deg, #BB86FC 0%, #03DAC6 100%);
            color: #000;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }

        .next-btn:active {
            transform: scale(0.98);
        }

        .next-btn:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
        }

        /* –ò—Ç–æ–≥–æ–≤—ã–π —ç–∫—Ä–∞–Ω */
        .works-summary-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .selected-works-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .selected-works-list {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 16px;
        }

        .selected-work-item {
            background: #1E1E1E;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .selected-work-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .selected-work-info {
            flex: 1;
            margin-right: 12px;
        }

        .selected-work-name {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .selected-work-unit {
            font-size: 12px;
            color: #B0B0B0;
        }

        .remove-work-btn {
            background: #FF3B30;
            border: none;
            color: #FFFFFF;
            border-radius: 8px;
            width: 32px;
            height: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.2s;
        }

        .remove-work-btn:active {
            transform: scale(0.9);
        }

        .work-quantity-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .work-total {
            font-weight: 500;
            font-size: 14px;
            color: #03DAC6;
        }

        .summary-totals {
            background: linear-gradient(135deg, #BB86FC 0%, #03DAC6 100%);
            color: #000;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            text-align: center;
        }

        .summary-total-amount {
            font-size: 28px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .summary-total-label {
            font-size: 14px;
            opacity: 0.8;
        }

        .summary-actions {
            display: flex;
            gap: 12px;
        }

        .summary-btn {
            flex: 1;
            background: #BB86FC;
            color: #000;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .summary-btn.secondary {
            background: #333;
            color: #FFFFFF;
        }

        .summary-btn:active {
            transform: scale(0.98);
        }

        /* –§–∏–Ω–∞–Ω—Å—ã */
        .finance-container {
            height: 100%;
        }

        .finance-summary {
            background: linear-gradient(135deg, #BB86FC 0%, #03DAC6 100%);
            color: #000;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            text-align: center;
        }

        .finance-total {
            font-size: 28px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .finance-label {
            font-size: 14px;
            opacity: 0.8;
        }

        .finance-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .finance-stat {
            background: #1E1E1E;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            border: 1px solid #333;
        }

        .finance-stat-value {
            font-size: 16px;
            font-weight: 500;
            color: #03DAC6;
            margin-bottom: 4px;
        }

        .finance-stat-label {
            font-size: 12px;
            color: #B0B0B0;
        }

        .finance-history {
            background: #1E1E1E;
            border-radius: 12px;
            padding: 16px;
            flex: 1;
        }

        .finance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #333;
        }

        .finance-item:last-child {
            border-bottom: none;
        }

        .finance-item-info {
            flex: 1;
        }

        .finance-item-type {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .finance-item-date {
            font-size: 12px;
            color: #B0B0B0;
        }

        .finance-item-amount {
            font-weight: 500;
            font-size: 14px;
        }

        .finance-item-amount.income {
            color: #4CAF50;
        }

        .finance-item-amount.expense {
            color: #FF3B30;
        }

        .add-expense-btn {
            background: #FF9500;
            color: #FFFFFF;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            margin-bottom: 16px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-expense-btn:active {
            transform: scale(0.98);
            background: #E6850E;
        }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-container {
            height: 100%;
        }

        .profile-header {
            background: linear-gradient(135deg, #BB86FC 0%, #03DAC6 100%);
            color: #000;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            text-align: center;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .profile-name {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .profile-role {
            font-size: 14px;
            opacity: 0.8;
        }

        .profile-info {
            background: #1E1E1E;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .profile-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #333;
        }

        .profile-item:last-child {
            border-bottom: none;
        }

        .profile-item-label {
            font-size: 14px;
            color: #B0B0B0;
        }

        .profile-item-value {
            font-size: 14px;
            font-weight: 500;
        }

        .logout-btn {
            background: #FF3B30;
            color: #FFFFFF;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }

        .logout-btn:active {
            transform: scale(0.98);
            background: #D70015;
        }

        .floating-counter {
            position: fixed;
            bottom: 100px;
            right: 16px;
            background: #BB86FC;
            color: #000;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            box-shadow: 0 4px 16px rgba(187, 134, 252, 0.4);
            z-index: 100;
        }

        @media (orientation: landscape) {
            .project-grid,
            .category-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="mobile-only">
        <div class="app-container">
            <!-- Header -->
            <div class="header">
                <button class="nav-btn" id="backBtn" onclick="goBack()" disabled>‚Äπ</button>
                <div class="header-title" id="headerTitle">–ü—Ä–æ–µ–∫—Ç—ã</div>
                <button class="nav-btn" id="forwardBtn" onclick="goForward()" disabled>‚Ä∫</button>
            </div>

            <!-- 1. –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
            <div class="content active" id="screen-projects">
                <div class="screen">
                    <div class="project-grid">
                        <div class="project-card" onclick="selectProject(1)">
                            <span class="project-icon">üè†</span>
                            <div class="project-title">–ñ–∏–ª–æ–π –∫–æ–º–ø–ª–µ–∫—Å "–°–æ–ª–Ω–µ—á–Ω—ã–π"</div>
                            <div class="project-subtitle">—É–ª. –°–æ–ª–Ω–µ—á–Ω–∞—è, 45</div>
                            <div class="project-stats">
                                <span>5 —Å–º–µ—Ç</span>
                                <span>‚ÇΩ2,450,000</span>
                            </div>
                        </div>
                        
                        <div class="project-card" onclick="selectProject(2)">
                            <span class="project-icon">üè¢</span>
                            <div class="project-title">–û—Ñ–∏—Å–Ω–æ–µ –∑–¥–∞–Ω–∏–µ "–ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä"</div>
                            <div class="project-subtitle">–ø—Ä. –î–µ–ª–æ–≤–æ–π, 12</div>
                            <div class="project-stats">
                                <span>3 —Å–º–µ—Ç—ã</span>
                                <span>‚ÇΩ1,850,000</span>
                            </div>
                        </div>

                        <div class="project-card" onclick="selectProject(3)">
                            <span class="project-icon">üè™</span>
                            <div class="project-title">–¢–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä "–ê—Ä–µ–Ω–∞"</div>
                            <div class="project-subtitle">—É–ª. –¢–æ—Ä–≥–æ–≤–∞—è, 8</div>
                            <div class="project-stats">
                                <span>2 —Å–º–µ—Ç—ã</span>
                                <span>‚ÇΩ980,000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. –≠–∫—Ä–∞–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ -->
            <div class="content" id="screen-project-info">
                <div class="screen">
                    <div class="project-header">
                        <div class="project-name" id="projectName">–ñ–∏–ª–æ–π –∫–æ–º–ø–ª–µ–∫—Å "–°–æ–ª–Ω–µ—á–Ω—ã–π"</div>
                        <div class="project-address" id="projectAddress">—É–ª. –°–æ–ª–Ω–µ—á–Ω–∞—è, 45</div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">‚ÇΩ450,000</div>
                            <div class="stat-label">–ü–æ–ª—É—á–µ–Ω–æ –∞–≤–∞–Ω—Å–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">‚ÇΩ1,200,000</div>
                            <div class="stat-label">–ú–æ–∏ –∑–∞—Ç—Ä–∞—Ç—ã</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">‚ÇΩ2,450,000</div>
                            <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–±–æ—Ç</div>
                        </div>
                    </div>

                    <div class="estimates-section">
                        <div class="section-header">
                            <div class="section-title">–°–º–µ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞</div>
                        </div>
                        
                        <div class="estimates-list">
                            <div class="estimate-card" onclick="viewEstimate(1)">
                                <div class="estimate-header">
                                    <div class="estimate-name">–§—É–Ω–¥–∞–º–µ–Ω—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                                    <div class="estimate-status approved">–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</div>
                                </div>
                                <div class="estimate-details">
                                    <span>15.01.2025</span>
                                    <span>12 –ø–æ–∑–∏—Ü–∏–π</span>
                                    <span>‚ÇΩ850,000</span>
                                </div>
                            </div>

                            <div class="estimate-card" onclick="viewEstimate(2)">
                                <div class="estimate-header">
                                    <div class="estimate-name">–°—Ç–µ–Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                                    <div class="estimate-status in_progress">–í —Ä–∞–±–æ—Ç–µ</div>
                                </div>
                                <div class="estimate-details">
                                    <span>18.01.2025</span>
                                    <span>8 –ø–æ–∑–∏—Ü–∏–π</span>
                                    <span>‚ÇΩ650,000</span>
                                </div>
                            </div>

                            <div class="estimate-card" onclick="viewEstimate(3)">
                                <div class="estimate-header">
                                    <div class="estimate-name">–û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                                    <div class="estimate-status draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</div>
                                </div>
                                <div class="estimate-details">
                                    <span>20.01.2025</span>
                                    <span>25 –ø–æ–∑–∏—Ü–∏–π</span>
                                    <span>‚ÇΩ950,000</span>
                                </div>
                            </div>

                            <div class="estimate-card" onclick="viewEstimate(4)">
                                <div class="estimate-header">
                                    <div class="estimate-name">–ö—Ä–æ–≤–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                                    <div class="estimate-status draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</div>
                                </div>
                                <div class="estimate-details">
                                    <span>22.01.2025</span>
                                    <span>6 –ø–æ–∑–∏—Ü–∏–π</span>
                                    <span>‚ÇΩ450,000</span>
                                </div>
                            </div>

                            <div class="estimate-card" onclick="viewEstimate(5)">
                                <div class="estimate-header">
                                    <div class="estimate-name">–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã</div>
                                    <div class="estimate-status in_progress">–í —Ä–∞–±–æ—Ç–µ</div>
                                </div>
                                <div class="estimate-details">
                                    <span>25.01.2025</span>
                                    <span>15 –ø–æ–∑–∏—Ü–∏–π</span>
                                    <span>‚ÇΩ720,000</span>
                                </div>
                            </div>
                        </div>

                        <button class="create-estimate-btn" onclick="startCreateEstimate()">
                            <span>‚ûï</span>
                            <span>–°–æ–∑–¥–∞—Ç—å —Å–º–µ—Ç—É</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 3. –≠–∫—Ä–∞–Ω –≤—Å–µ—Ö —Å–º–µ—Ç -->
            <div class="content" id="screen-all-estimates">
                <div class="screen">
                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ —Å–º–µ—Ç..." id="estimateSearchInput">
                    </div>

                    <div class="estimates-list">
                        <div class="estimate-card" onclick="viewEstimate(1)">
                            <div class="estimate-header">
                                <div class="estimate-name">–§—É–Ω–¥–∞–º–µ–Ω—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã - –ñ–ö "–°–æ–ª–Ω–µ—á–Ω—ã–π"</div>
                                <div class="estimate-status approved">–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</div>
                            </div>
                            <div class="estimate-details">
                                <span>15.01.2025</span>
                                <span>12 –ø–æ–∑–∏—Ü–∏–π</span>
                                <span>‚ÇΩ850,000</span>
                            </div>
                        </div>

                        <div class="estimate-card" onclick="viewEstimate(2)">
                            <div class="estimate-header">
                                <div class="estimate-name">–°—Ç–µ–Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã - –ñ–ö "–°–æ–ª–Ω–µ—á–Ω—ã–π"</div>
                                <div class="estimate-status in_progress">–í —Ä–∞–±–æ—Ç–µ</div>
                            </div>
                            <div class="estimate-details">
                                <span>18.01.2025</span>
                                <span>8 –ø–æ–∑–∏—Ü–∏–π</span>
                                <span>‚ÇΩ650,000</span>
                            </div>
                        </div>

                        <div class="estimate-card" onclick="viewEstimate(6)">
                            <div class="estimate-header">
                                <div class="estimate-name">–û—Ç–¥–µ–ª–∫–∞ –æ—Ñ–∏—Å–æ–≤ - –ë–¶ "–î–µ–ª–æ–≤–æ–π"</div>
                                <div class="estimate-status approved">–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</div>
                            </div>
                            <div class="estimate-details">
                                <span>10.01.2025</span>
                                <span>20 –ø–æ–∑–∏—Ü–∏–π</span>
                                <span>‚ÇΩ1,200,000</span>
                            </div>
                        </div>

                        <div class="estimate-card" onclick="viewEstimate(7)">
                            <div class="estimate-header">
                                <div class="estimate-name">–ü–∞—Ä–∫–æ–≤–∫–∞ - –¢–¶ "–ê—Ä–µ–Ω–∞"</div>
                                <div class="estimate-status draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</div>
                            </div>
                            <div class="estimate-details">
                                <span>28.01.2025</span>
                                <span>5 –ø–æ–∑–∏—Ü–∏–π</span>
                                <span>‚ÇΩ380,000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. –≠–∫—Ä–∞–Ω —Ñ–∏–Ω–∞–Ω—Å–æ–≤ -->
            <div class="content" id="screen-finance">
                <div class="screen">
                    <div class="finance-container">
                        <div class="finance-summary">
                            <div class="finance-total">‚ÇΩ+1,250,000</div>
                            <div class="finance-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å –∑–∞ –ø–µ—Ä–∏–æ–¥</div>
                        </div>

                        <div class="finance-stats">
                            <div class="finance-stat">
                                <div class="finance-stat-value">‚ÇΩ2,450,000</div>
                                <div class="finance-stat-label">–î–æ—Ö–æ–¥—ã</div>
                            </div>
                            <div class="finance-stat">
                                <div class="finance-stat-value">‚ÇΩ1,200,000</div>
                                <div class="finance-stat-label">–†–∞—Å—Ö–æ–¥—ã</div>
                            </div>
                        </div>

                        <button class="add-expense-btn" onclick="addExpense()">
                            <span>üí∞</span>
                            <span>–í–Ω–µ—Å—Ç–∏ –∑–∞—Ç—Ä–∞—Ç—ã</span>
                        </button>

                        <div class="finance-history">
                            <div class="section-header">
                                <div class="section-title">–ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏–π</div>
                            </div>
                            
                            <div class="finance-item">
                                <div class="finance-item-info">
                                    <div class="finance-item-type">–ê–≤–∞–Ω—Å –∑–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç</div>
                                    <div class="finance-item-date">28.01.2025</div>
                                </div>
                                <div class="finance-item-amount income">+‚ÇΩ450,000</div>
                            </div>

                            <div class="finance-item">
                                <div class="finance-item-info">
                                    <div class="finance-item-type">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —Å—Ç–µ–Ω</div>
                                    <div class="finance-item-date">25.01.2025</div>
                                </div>
                                <div class="finance-item-amount expense">-‚ÇΩ280,000</div>
                            </div>

                            <div class="finance-item">
                                <div class="finance-item-info">
                                    <div class="finance-item-type">–û–ø–ª–∞—Ç–∞ –∑–∞ –æ—Ç–¥–µ–ª–∫—É</div>
                                    <div class="finance-item-date">20.01.2025</div>
                                </div>
                                <div class="finance-item-amount income">+‚ÇΩ850,000</div>
                            </div>

                            <div class="finance-item">
                                <div class="finance-item-info">
                                    <div class="finance-item-type">–ê—Ä–µ–Ω–¥–∞ —Ç–µ—Ö–Ω–∏–∫–∏</div>
                                    <div class="finance-item-date">18.01.2025</div>
                                </div>
                                <div class="finance-item-amount expense">-‚ÇΩ120,000</div>
                            </div>

                            <div class="finance-item">
                                <div class="finance-item-info">
                                    <div class="finance-item-type">–ó–∞—Ä–ø–ª–∞—Ç–∞ –±—Ä–∏–≥–∞–¥—ã</div>
                                    <div class="finance-item-date">15.01.2025</div>
                                </div>
                                <div class="finance-item-amount expense">-‚ÇΩ350,000</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è -->
            <div class="content" id="screen-profile">
                <div class="screen">
                    <div class="profile-container">
                        <div class="profile-header">
                            <div class="profile-avatar">üë§</div>
                            <div class="profile-name">–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</div>
                            <div class="profile-role">–ü—Ä–æ—Ä–∞–±</div>
                        </div>

                        <div class="profile-info">
                            <div class="profile-item">
                                <div class="profile-item-label">Email</div>
                                <div class="profile-item-value">foreman@example.com</div>
                            </div>
                            <div class="profile-item">
                                <div class="profile-item-label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
                                <div class="profile-item-value">+7 (999) 123-45-67</div>
                            </div>
                            <div class="profile-item">
                                <div class="profile-item-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</div>
                                <div class="profile-item-value">29.01.2025 09:30</div>
                            </div>
                            <div class="profile-item">
                                <div class="profile-item-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–º–µ—Ç</div>
                                <div class="profile-item-value">8</div>
                            </div>
                        </div>

                        <button class="logout-btn" onclick="logout()">
                            üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
                        </button>
                    </div>
                </div>
            </div>

            <!-- 6. –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
            <div class="content" id="screen-categories">
                <div class="screen">
                    <div class="category-grid">
                        <div class="category-card" onclick="selectCategory(1, '–ó–µ–º–ª—è–Ω—ã–µ —Ä–∞–±–æ—Ç—ã')">
                            <span class="category-icon">üèóÔ∏è</span>
                            <div class="category-name">–ó–µ–º–ª—è–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                            <div class="category-count">12 —Ä–∞–±–æ—Ç</div>
                        </div>
                        <div class="category-card" onclick="selectCategory(2, '–ö–∞–º–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã')">
                            <span class="category-icon">üß±</span>
                            <div class="category-name">–ö–∞–º–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                            <div class="category-count">18 —Ä–∞–±–æ—Ç</div>
                        </div>
                        <div class="category-card" onclick="selectCategory(3, '–û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã')">
                            <span class="category-icon">üé®</span>
                            <div class="category-name">–û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                            <div class="category-count">25 —Ä–∞–±–æ—Ç</div>
                        </div>
                        <div class="category-card" onclick="selectCategory(4, '–≠–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂')">
                            <span class="category-icon">‚ö°</span>
                            <div class="category-name">–≠–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂</div>
                            <div class="category-count">15 —Ä–∞–±–æ—Ç</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 7. –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–∞–±–æ—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
            <div class="content" id="screen-works">
                <div class="screen">
                    <div class="works-list" id="worksList"></div>
                    <div class="works-actions">
                        <button class="next-btn" id="nextWorksBtn" onclick="proceedToNextStep()" disabled>
                            <span>‚Üí</span>
                            <span>–î–∞–ª–µ–µ</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 8. –≠–∫—Ä–∞–Ω –∏—Ç–æ–≥–æ–≤–æ–π —Å–º–µ—Ç—ã -->
            <div class="content" id="screen-works-summary">
                <div class="screen">
                    <div class="works-summary-container">
                        <div class="search-bar">
                            <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è..." id="workSearchInput" oninput="searchWorks()">
                        </div>

                        <div class="summary-totals">
                            <div class="summary-total-amount" id="summaryTotalAmount">‚ÇΩ0</div>
                            <div class="summary-total-label">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–º–µ—Ç—ã</div>
                        </div>

                        <div class="selected-works-section">
                            <div class="section-header">
                                <div class="section-title">–í—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                                <div style="font-size: 14px; color: #B0B0B0;" id="worksCount">0 –ø–æ–∑–∏—Ü–∏–π</div>
                            </div>
                            
                            <div class="selected-works-list" id="selectedWorksList">
                                <!-- –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã -->
                            </div>

                            <div class="summary-actions">
                                <button class="summary-btn secondary" onclick="addMoreWorks()">+ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—ã</button>
                                <button class="summary-btn" onclick="saveEstimate()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–º–µ—Ç—É</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
            <nav class="bottom-nav">
                <div class="nav-item active" onclick="switchTab('projects')">
                    <div class="nav-indicator"></div>
                    <div class="nav-icon icon-projects"></div>
                </div>
                <div class="nav-item" onclick="switchTab('estimates')">
                    <div class="nav-indicator"></div>
                    <div class="nav-icon icon-estimates"></div>
                </div>
                <div class="nav-item" onclick="switchTab('finance')">
                    <div class="nav-indicator"></div>
                    <div class="nav-icon icon-finance"></div>
                </div>
                <div class="nav-item" onclick="switchTab('profile')">
                    <div class="nav-indicator"></div>
                    <div class="nav-icon icon-profile"></div>
                </div>
            </nav>

            <!-- Floating Counter -->
            <div class="floating-counter" id="floatingCounter" style="display: none;">
                <span id="counterValue">0</span>
            </div>
        </div>
    </div>

    <div class="desktop-only" style="display: flex; align-items: center; justify-content: center; height: 100vh; text-align: center;">
        <div>
            <h1>üñ•Ô∏è –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è</h1>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</p>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentScreen = 'screen-projects';
        let navigationHistory = [];
        let forwardHistory = [];
        let selectedProject = null;
        let selectedWorks = [];
        let currentCategory = null;
        let currentTab = 'projects';

        // –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
        const worksByCategory = {
            1: [
                { id: 1, name: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä—É–Ω—Ç–∞ —ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä–æ–º', unit: '–º¬≥', price: 450 },
                { id: 2, name: '–û–±—Ä–∞—Ç–Ω–∞—è –∑–∞—Å—ã–ø–∫–∞', unit: '–º¬≥', price: 250 },
                { id: 3, name: '–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏', unit: '–º¬≤', price: 85 }
            ],
            2: [
                { id: 4, name: '–ö–ª–∞–¥–∫–∞ –∫–∏—Ä–ø–∏—á–∞', unit: '–º¬≥', price: 1200 },
                { id: 5, name: '–ö–ª–∞–¥–∫–∞ –±–ª–æ–∫–æ–≤', unit: '–º¬≥', price: 800 },
                { id: 6, name: '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ–º—ã—á–µ–∫', unit: '—à—Ç', price: 650 }
            ],
            3: [
                { id: 7, name: '–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ —Å—Ç–µ–Ω', unit: '–º¬≤', price: 450 },
                { id: 8, name: '–ü–æ–∫—Ä–∞—Å–∫–∞ –ø–æ—Ç–æ–ª–∫–∞', unit: '–º¬≤', price: 350 },
                { id: 9, name: '–£–∫–ª–∞–¥–∫–∞ –ø–ª–∏—Ç–∫–∏', unit: '–º¬≤', price: 800 },
                { id: 10, name: '–ü–æ–∫–ª–µ–π–∫–∞ –æ–±–æ–µ–≤', unit: '–º¬≤', price: 250 }
            ],
            4: [
                { id: 11, name: '–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è', unit: '–º', price: 120 },
                { id: 12, name: '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–∑–µ—Ç–æ–∫', unit: '—à—Ç', price: 350 },
                { id: 13, name: '–ú–æ–Ω—Ç–∞–∂ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤', unit: '—à—Ç', price: 450 }
            ]
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) 
                || window.innerWidth <= 768;
        }

        if (isMobile()) {
            document.querySelector('.mobile-only').style.display = 'block';
            document.querySelector('.desktop-only').style.display = 'none';
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é
        function switchTab(tab) {
            const tabs = {
                'projects': 'screen-projects',
                'estimates': 'screen-all-estimates',
                'finance': 'screen-finance',
                'profile': 'screen-profile'
            };

            currentTab = tab;
            
            // –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≥–ª–∞–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫
            navigationHistory = [];
            forwardHistory = [];
            
            showScreen(tabs[tab], false);
            updateTabIndicators();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤–∫–ª–∞–¥–æ–∫
        function updateTabIndicators() {
            document.querySelectorAll('.nav-item').forEach((item, index) => {
                item.classList.remove('active');
            });
            
            const tabIndex = ['projects', 'estimates', 'finance', 'profile'].indexOf(currentTab);
            if (tabIndex >= 0) {
                document.querySelectorAll('.nav-item')[tabIndex].classList.add('active');
            }
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
        function showScreen(screenId, addToHistory = true) {
            if (addToHistory && currentScreen !== screenId) {
                navigationHistory.push(currentScreen);
                forwardHistory = [];
            }
            
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
            
            updateNavigationUI();
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥
        function goBack() {
            if (navigationHistory.length > 0) {
                forwardHistory.push(currentScreen);
                const previousScreen = navigationHistory.pop();
                showScreen(previousScreen, false);
            }
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤–ø–µ—Ä–µ–¥
        function goForward() {
            if (forwardHistory.length > 0) {
                navigationHistory.push(currentScreen);
                const nextScreen = forwardHistory.pop();
                showScreen(nextScreen, false);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        function updateNavigationUI() {
            const backBtn = document.getElementById('backBtn');
            const forwardBtn = document.getElementById('forwardBtn');
            const headerTitle = document.getElementById('headerTitle');

            backBtn.disabled = navigationHistory.length === 0;
            forwardBtn.disabled = forwardHistory.length === 0;

            const titles = {
                'screen-projects': '–ü—Ä–æ–µ–∫—Ç—ã',
                'screen-project-info': '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ',
                'screen-all-estimates': '–í—Å–µ —Å–º–µ—Ç—ã',
                'screen-categories': '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏',
                'screen-works': currentCategory || '–†–∞–±–æ—Ç—ã',
                'screen-works-summary': '–ü–µ—Ä–µ—á–µ–Ω—å —Ä–∞–±–æ—Ç',
                'screen-finance': '–§–∏–Ω–∞–Ω—Å—ã',
                'screen-profile': '–ü—Ä–æ—Ñ–∏–ª—å'
            };

            headerTitle.textContent = titles[currentScreen] || '–ó–∞–≥—Ä—É–∑–∫–∞...';
        }

        // –í—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
        function selectProject(projectId) {
            selectedProject = projectId;
            const projects = {
                1: { name: '–ñ–∏–ª–æ–π –∫–æ–º–ø–ª–µ–∫—Å "–°–æ–ª–Ω–µ—á–Ω—ã–π"', address: '—É–ª. –°–æ–ª–Ω–µ—á–Ω–∞—è, 45' },
                2: { name: '–û—Ñ–∏—Å–Ω–æ–µ –∑–¥–∞–Ω–∏–µ "–ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä"', address: '–ø—Ä. –î–µ–ª–æ–≤–æ–π, 12' },
                3: { name: '–¢–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä "–ê—Ä–µ–Ω–∞"', address: '—É–ª. –¢–æ—Ä–≥–æ–≤–∞—è, 8' }
            };
            
            document.getElementById('projectName').textContent = projects[projectId].name;
            document.getElementById('projectAddress').textContent = projects[projectId].address;
            
            showScreen('screen-project-info');
        }

        // –ù–∞—á–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ—Ç—ã
        function startCreateEstimate() {
            selectedWorks = [];
            updateFloatingCounter();
            showScreen('screen-categories');
        }

        // –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function selectCategory(categoryId, categoryName) {
            currentCategory = categoryName;
            loadWorksForCategory(categoryId);
            showScreen('screen-works');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–±–æ—Ç –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function loadWorksForCategory(categoryId) {
            const works = worksByCategory[categoryId] || [];
            const worksList = document.getElementById('worksList');
            worksList.innerHTML = '';

            works.forEach(work => {
                const existingWork = selectedWorks.find(sw => sw.id === work.id);
                const workItem = document.createElement('div');
                workItem.className = `work-item ${existingWork ? 'selected' : ''}`;
                workItem.onclick = () => toggleWork(work, workItem);
                
                workItem.innerHTML = `
                    <div class="work-header">
                        <div class="work-name">${work.name}</div>
                        <div class="work-price">‚ÇΩ${work.price}/${work.unit}</div>
                    </div>
                    <div class="work-unit">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è: ${work.unit}</div>
                    <div class="work-quantity">
                        <div class="quantity-input-group">
                            <span class="quantity-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
                            <input type="number" class="quantity-input" value="${existingWork ? existingWork.quantity : ''}" 
                                   onchange="updateWorkQuantity(${work.id}, this.value)" step="0.01" min="0">
                            <span style="font-size: 12px; color: #B0B0B0;">${work.unit}</span>
                        </div>
                    </div>
                `;
                worksList.appendChild(workItem);
            });
            updateNextButton();
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Ä–∞–±–æ—Ç—ã
        function toggleWork(work, element) {
            const existingIndex = selectedWorks.findIndex(sw => sw.id === work.id);
            
            if (existingIndex >= 0) {
                selectedWorks.splice(existingIndex, 1);
                element.classList.remove('selected');
            } else {
                selectedWorks.push({
                    id: work.id,
                    name: work.name,
                    unit: work.unit,
                    price: work.price,
                    quantity: 1
                });
                element.classList.add('selected');
                
                const quantityInput = element.querySelector('.quantity-input');
                quantityInput.value = 1;
            }
            
            updateFloatingCounter();
            updateNextButton();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã
        function updateWorkQuantity(workId, quantity) {
            const work = selectedWorks.find(sw => sw.id === workId);
            if (work) {
                work.quantity = parseFloat(quantity) || 0;
                if (work.quantity <= 0) {
                    const index = selectedWorks.findIndex(sw => sw.id === workId);
                    selectedWorks.splice(index, 1);
                    
                    const workItem = document.querySelector(`[onclick*="${workId}"]`);
                    if (workItem) {
                        workItem.classList.remove('selected');
                    }
                }
            }
            updateFloatingCounter();
            updateNextButton();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ"
        function updateNextButton() {
            const nextBtn = document.getElementById('nextWorksBtn');
            if (nextBtn) {
                nextBtn.disabled = selectedWorks.length === 0;
            }
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
        function proceedToNextStep() {
            if (selectedWorks.length > 0) {
                showWorksSummary();
                showScreen('screen-works-summary');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω —Å –∏—Ç–æ–≥–æ–º —Ä–∞–±–æ—Ç
        function showWorksSummary() {
            updateSelectedWorksList();
            updateSummaryTotal();
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç
        function updateSelectedWorksList() {
            const container = document.getElementById('selectedWorksList');
            const worksCount = document.getElementById('worksCount');
            
            container.innerHTML = '';
            worksCount.textContent = `${selectedWorks.length} –ø–æ–∑–∏—Ü–∏–π`;
            
            selectedWorks.forEach((work, index) => {
                const total = work.price * work.quantity;
                const workItem = document.createElement('div');
                workItem.className = 'selected-work-item';
                workItem.innerHTML = `
                    <div class="selected-work-header">
                        <div class="selected-work-info">
                            <div class="selected-work-name">${work.name}</div>
                            <div class="selected-work-unit">–ï–¥–∏–Ω–∏—Ü–∞: ${work.unit} ‚Ä¢ –¶–µ–Ω–∞: ‚ÇΩ${work.price}/${work.unit}</div>
                        </div>
                        <button class="remove-work-btn" onclick="removeSelectedWork(${index})">
                            √ó
                        </button>
                    </div>
                    <div class="work-quantity-section">
                        <div class="quantity-input-group">
                            <span class="quantity-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
                            <input type="number" class="quantity-input" value="${work.quantity}" 
                                   onchange="updateSelectedWorkQuantity(${index}, this.value)" step="0.01" min="0">
                            <span style="font-size: 12px; color: #B0B0B0;">${work.unit}</span>
                        </div>
                        <div class="work-total">‚ÇΩ${total.toLocaleString()}</div>
                    </div>
                `;
                container.appendChild(workItem);
            });
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ–±—â—É—é —Å—É–º–º—É
        function updateSummaryTotal() {
            const total = selectedWorks.reduce((sum, work) => sum + (work.price * work.quantity), 0);
            document.getElementById('summaryTotalAmount').textContent = `‚ÇΩ${total.toLocaleString()}`;
        }

        // –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É
        function removeSelectedWork(index) {
            selectedWorks.splice(index, 1);
            updateSelectedWorksList();
            updateSummaryTotal();
            updateFloatingCounter();
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
        function updateSelectedWorkQuantity(index, quantity) {
            if (selectedWorks[index]) {
                selectedWorks[index].quantity = parseFloat(quantity) || 0;
                if (selectedWorks[index].quantity <= 0) {
                    removeSelectedWork(index);
                } else {
                    updateSelectedWorksList();
                    updateSummaryTotal();
                }
            }
        }

        // –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞–±–æ—Ç
        function addMoreWorks() {
            showScreen('screen-categories');
        }

        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–º–µ—Ç—É
        function saveEstimate() {
            if (selectedWorks.length > 0) {
                const total = selectedWorks.reduce((sum, work) => sum + (work.price * work.quantity), 0);
                alert(`–°–º–µ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!\n–í—Å–µ–≥–æ –ø–æ–∑–∏—Ü–∏–π: ${selectedWorks.length}\n–û–±—â–∞—è —Å—É–º–º–∞: ‚ÇΩ${total.toLocaleString()}`);
                
                // –û—á–∏—Å—Ç–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É
                selectedWorks = [];
                updateFloatingCounter();
                showScreen('screen-project-info');
            }
        }

        // –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç (–∑–∞–≥–ª—É—à–∫–∞)
        function searchWorks() {
            const searchValue = document.getElementById('workSearchInput').value;
            if (searchValue.length > 2) {
                console.log('–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç:', searchValue);
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ä–∞–±–æ—Ç–∞–º
            }
        }

        // –í–Ω–µ—Å—Ç–∏ –∑–∞—Ç—Ä–∞—Ç—ã
        function addExpense() {
            const amount = prompt('–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –∑–∞—Ç—Ä–∞—Ç:');
            if (amount && !isNaN(amount)) {
                alert(`–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Å—É–º–º—É ‚ÇΩ${parseFloat(amount).toLocaleString()} –≤–Ω–µ—Å–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º—É`);
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞
        function updateFloatingCounter() {
            const counter = document.getElementById('floatingCounter');
            const counterValue = document.getElementById('counterValue');
            
            if (selectedWorks.length > 0) {
                counter.style.display = 'flex';
                counterValue.textContent = selectedWorks.length;
            } else {
                counter.style.display = 'none';
            }
        }

        // –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–º–µ—Ç—ã
        function viewEstimate(estimateId) {
            alert(`–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–º–µ—Ç—ã #${estimateId}`);
        }

        // –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
        function logout() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                alert('–í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞...');
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã—Ö–æ–¥–∞
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateNavigationUI();
        updateTabIndicators();

        // Touch —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function addTouchEffects() {
            const interactiveElements = document.querySelectorAll(`
                .project-card, .category-card, .work-item, .estimate-card, 
                .nav-item, .create-estimate-btn, .logout-btn, .summary-btn, 
                .add-expense-btn, .remove-work-btn, .next-btn, .nav-btn
            `);
            
            interactiveElements.forEach(element => {
                element.addEventListener('touchstart', function(e) {
                    this.style.transform = 'scale(0.98)';
                });
                
                element.addEventListener('touchend', function(e) {
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 100);
                });
            });
        }

        // –í—ã–∑–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è touch —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        document.addEventListener('DOMContentLoaded', addTouchEffects);
        addTouchEffects(); // –í—ã–∑–æ–≤ —Å—Ä–∞–∑—É –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –µ—Å—Ç—å
    </script>
</body>
</html>