# üîç –û—Ç—á–µ—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –ø—Ä–æ–±–ª–µ–º—ã –º–æ–±–∏–ª—å–Ω–æ–≥–æ workflow —Å–æ–∑–¥–∞–Ω–∏—è —Å–º–µ—Ç

## –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–±–æ—Ç—ã –Ω–µ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ –º–æ–±–∏–ª—å–Ω–æ–º UI –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–º–µ—Ç. –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö WorkSelection ‚Üí Navigation Context ‚Üí EstimateSummary —Ç–µ—Ä—è–ª –¥–∞–Ω–Ω—ã–µ.

## üîß –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### 1. –ò–∑—É—á–µ–Ω—ã —Ñ–∞–π–ª—ã:
- ‚úÖ `/frontend/src/mobile/pages/WorkSelection.jsx` - –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `/frontend/src/mobile/hooks/useMobileNavigation.js` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- ‚úÖ `/frontend/src/mobile/pages/EstimateSummary.jsx` - –ø–æ–ª—É—á–∞—Ç–µ–ª—å –¥–∞–Ω–Ω—ã—Ö  
- ‚úÖ `/frontend/src/mobile/utils/dataUtils.js` - —É—Ç–∏–ª–∏—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- üîß WorkSelection: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ä–∞–±–æ—Ç –≤ `handleContinue()`
- üîß Navigation Context: –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ `addWorksToScreen()`  
- üîß EstimateSummary: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- üîß DataUtils: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

## üéØ –ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞

### **–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ useEffect

**–§–∞–π–ª**: `EstimateSummary.jsx`, —Å—Ç—Ä–æ–∫–∞ 125
```javascript
// ‚ùå –ë–´–õ–û (—Å–æ–∑–¥–∞–≤–∞–ª–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª):
}, [getScreenData, setScreenData, selectedWorks.length]);

// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û:  
}, [getScreenData, setScreenData]);
```

**–ü—Ä–∏—á–∏–Ω–∞ —Å–±–æ—è**:
1. useEffect –∑–∞–ø—É—Å–∫–∞–ª—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `selectedWorks.length`
2. –í–Ω—É—Ç—Ä–∏ effect –æ–±–Ω–æ–≤–ª—è–ª—Å—è `selectedWorks` —á–µ—Ä–µ–∑ `setSelectedWorks()`
3. –≠—Ç–æ –∏–∑–º–µ–Ω—è–ª–æ `selectedWorks.length` 
4. –ß—Ç–æ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞–ª–æ effect ‚Üí **–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤**
5. React —Å–±—Ä–∞—Å—ã–≤–∞–ª —Å–æ—Å—Ç–æ—è–Ω–∏–µ, **—Ä–∞–±–æ—Ç—ã —Ç–µ—Ä—è–ª–∏—Å—å**

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**
```javascript
// –£–±—Ä–∞–ª–∏ selectedWorks.length –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect
}, [getScreenData, setScreenData]);
```

### 2. **–£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
```javascript  
// –ò–∑–º–µ–Ω–∏–ª–∏ —É—Å–ª–æ–≤–∏–µ —Å !== –Ω–∞ > –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
if (currentScreenData?.returnFromWorkSelection || 
    (availableWorks.length > 0 && availableWorks.length > selectedWorks.length)) {
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è navigation context
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ
- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üî¨ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è

### Workflow –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–º–µ—Ç:
1. **WorkSelection.jsx** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–∞–±–æ—Ç—ã 
2. **handleContinue()** ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `addWorksToScreen('estimate-editor', selectedWorks)`
3. **useMobileNavigation.js** ‚Üí `addWorksToScreen()` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `mergeWorksArrays()`
4. **Navigation Context** ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ `screenData['estimate-editor'].selectedWorks`
5. **EstimateSummary.jsx** ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å context —á–µ—Ä–µ–∑ useEffect
6. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** ‚Üí —Ä–∞–±–æ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–º–µ—Ç—ã

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `normalizeWorksData()` - –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É
- `mergeWorksArrays()` - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤  
- `addWorksToScreen()` - –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- `getScreenData()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –†–∞–±–æ—Ç—ã —Ç–µ—Ä—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
- ‚ùå –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
- ‚ùå –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:  
- ‚úÖ –†–∞–±–æ—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üìä –§–∞–π–ª—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

1. **EstimateSummary.jsx** - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. **WorkSelection.jsx** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **useMobileNavigation.js** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ process addWorksToScreen()
4. **dataUtils.js** - —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤
5. **WorkflowDebug.js** - —Å–æ–∑–¥–∞–Ω –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –º–æ–¥—É–ª—å (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)

## üîÆ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

1. **–ò–∑–±–µ–≥–∞–π—Ç–µ state –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö useEffect**, –µ—Å–ª–∏ —ç—Ç–æ—Ç state –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ effect
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useCallback** –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
3. **–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ React.memo** –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å —á–∞—Å—Ç—ã–º–∏ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏
4. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö
5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** workflow –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2025-08-20*  
*–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞: –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ useEffect EstimateSummary*