# üöÄ Fast Dev Deploy - –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π dev –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

**`quick-deploy-dev.sh`** - –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç Docker –¥–µ–ø–ª–æ—è dev –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã `estimate-backend-dev`, `estimate-frontend-dev`
- –°–æ–±–∏—Ä–∞–µ—Ç –Ω–æ–≤—ã–µ Docker –æ–±—Ä–∞–∑—ã –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: `./quick-deploy-dev.sh`

**`diagnose-dev-containers.sh`** - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º dev –æ–∫—Ä—É–∂–µ–Ω–∏—è  
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ dev.app.iqbs.pro
- Health check API
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: `./diagnose-dev-containers.sh`

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

**`.env.dev`** - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è dev –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, CORS, Django settings
- –ü—É—Ç–∏ –∫ —Å—Ç–∞—Ç–∏–∫–µ –∏ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–∞–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è dev

**`TROUBLESHOOTING.md`** - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –¥–µ–ø–ª–æ—è
- –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –æ—à–∏–±–æ–∫
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SSH, Docker, Nginx –ø—Ä–æ–±–ª–µ–º
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥–µ–ø–ª–æ—è

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```bash
git push origin dev
```
–ó–∞–ø—É—Å–∫–∞–µ—Ç GitHub Actions workflow, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–ø–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 2. –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh root@195.14.122.135
cd /var/www/estimate-app-dev
./deploy/fast_dev_deploy/quick-deploy-dev.sh
```

### 3. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:
```bash
./diagnose-dev-containers.sh
```

## üìä Dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ

- **URL**: https://dev.app.iqbs.pro
- **API**: https://dev.app.iqbs.pro/api/v1/
- **Health**: https://dev.app.iqbs.pro/api/v1/health/

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
- **Backend**: `estimate-backend-dev` (–ø–æ—Ä—Ç 8001)
- **Frontend**: `estimate-frontend-dev` (–ø–æ—Ä—Ç 3001)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –ë–î** —á—Ç–æ –∏ –ø—Ä–æ–¥–∞–∫—à–Ω (`estimate_app_db`)
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `estimate-postgres`
- **SECRET_KEY**: –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–ª—è dev (`dev-secret-key-for-testing`)

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
curl -s https://dev.app.iqbs.pro/api/v1/health/
```

### –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
ssh root@195.14.122.135 'docker logs estimate-backend-dev --tail 30'
ssh root@195.14.122.135 'docker logs estimate-frontend-dev --tail 20'
```

### –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
ssh root@195.14.122.135 'docker ps | grep estimate.*dev'
```

## ‚ö° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** —á–µ—Ä–µ–∑ GitHub Actions  
‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** backend –∏ frontend  
‚úÖ **–û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã** –æ—Ç –ø—Ä–æ–¥–∞–∫—à–Ω (8001/3001 vs 8000/3000)  
‚úÖ **–û–±—â–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –ø—Ä–æ–¥–∞–∫—à–Ω  
‚úÖ **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** —Å SSL –∏ CORS  
‚úÖ **Health checks** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥  

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°–µ—Ç—å Docker:
Dev –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Å–µ—Ç–∏ `estimate_network` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ PostgreSQL.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `SECRET_KEY=dev-secret-key-for-testing`
- `DATABASE_URL=postgresql://estimate_user:secure_password_123@postgres:5432/estimate_app_db`
- `DJANGO_SETTINGS_MODULE=core.settings_production`
- `DEBUG=False`

### GitHub Actions:
Workflow —Ñ–∞–π–ª: `/.github/workflows/deploy-dev.yml`
- –¢—Ä–∏–≥–≥–µ—Ä: push –≤ –≤–µ—Ç–∫—É `dev`
- SSH –∫–ª—é—á: `PRODUCTION_SSH_KEY`
- –í—Ä–µ–º—è –¥–µ–ø–ª–æ—è: 3-5 –º–∏–Ω—É—Ç

---

**–°–æ–∑–¥–∞–Ω–æ**: 22.08.2025  
**–°—Ç–∞—Ç—É—Å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —á–µ—Ä–µ–∑ estimate_network